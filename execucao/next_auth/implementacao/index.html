<!DOCTYPE html>
<html lang="pt-BR" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="turbo-cache-control" content="no-cache" data-turbo-track="reload" data-track-token="3.5.0.763159161695">

    <!-- See retype.com -->
    <meta name="generator" content="Retype 3.5.0">

    <!-- Primary Meta Tags -->
    <title>Guia de uso NextAuth com T3 | DocStruct</title>
    <meta name="title" content="Guia de uso NextAuth com T3 | DocStruct">
    <meta name="description" content="Para adicionar o NextAuth a um projeto Next.js basta acessar a raiz do repositório pelo terminal e executar um dos comandos abaixo de acordo com o...">

    <!-- Canonical -->
    <link rel="canonical" href="https://docs.structej.com/execucao/next_auth/implementacao/">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://docs.structej.com/execucao/next_auth/implementacao/">
    <meta property="og:title" content="Guia de uso NextAuth com T3 | DocStruct">
    <meta property="og:description" content="Para adicionar o NextAuth a um projeto Next.js basta acessar a raiz do repositório pelo terminal e executar um dos comandos abaixo de acordo com o...">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://docs.structej.com/execucao/next_auth/implementacao/">
    <meta property="twitter:title" content="Guia de uso NextAuth com T3 | DocStruct">
    <meta property="twitter:description" content="Para adicionar o NextAuth a um projeto Next.js basta acessar a raiz do repositório pelo terminal e executar um dos comandos abaixo de acordo com o...">

    <script data-cfasync="false">(function () { var el = document.documentElement, m = localStorage.getItem("doc_theme"), wm = window.matchMedia; if (m === "dark" || (!m && wm && wm("(prefers-color-scheme: dark)").matches)) { el.classList.add("dark") } else { el.classList.remove("dark") } })();</script>

    <link href="../../../resources/css/retype.css?v=3.5.0.763159161695" rel="stylesheet">

    <script data-cfasync="false" src="../../../resources/js/config.js?v=3.5.0.763159161695" data-turbo-eval="false" defer></script>
    <script data-cfasync="false" src="../../../resources/js/retype.js?v=3.5.0" data-turbo-eval="false" defer></script>
    <script id="lunr-js" data-cfasync="false" src="../../../resources/js/lunr.js?v=3.5.0.763159161695" data-turbo-eval="false" defer></script>
    <script id="prism-js" data-cfasync="false" src="../../../resources/js/prism.js?v=3.5.0.763159161695" defer></script>
</head>
<body>
    <div id="docs-app" class="relative text-base antialiased text-gray-700 bg-white font-body dark:bg-dark-850 dark:text-dark-300">
        <div class="absolute bottom-0 left-0 bg-gray-100 dark:bg-dark-800" style="top: 5rem; right: 50%"></div>
    
        <header id="docs-site-header" class="sticky top-0 z-30 flex w-full h-16 bg-white border-b border-gray-200 md:h-20 dark:bg-dark-850 dark:border-dark-650">
            <div class="container relative flex items-center justify-between pr-6 grow md:justify-start">
                <!-- Mobile menu button skeleton -->
                <button v-cloak class="skeleton docs-mobile-menu-button flex items-center justify-center shrink-0 overflow-hidden dark:text-white focus:outline-none rounded-full w-10 h-10 ml-3.5 md:hidden"><svg xmlns="http://www.w3.org/2000/svg" class="mb-px shrink-0" width="24" height="24" viewBox="0 0 24 24" role="presentation" style="margin-bottom: 0px;"><g fill="currentColor"><path d="M2 4h20v2H2zM2 11h20v2H2zM2 18h20v2H2z"></path></g></svg></button>
                <div v-cloak id="docs-sidebar-toggle"></div>
        
                <!-- Logo -->
                <div class="flex items-center justify-between h-full py-2 md:w-75">
                    <div class="flex items-center px-2 md:px-6">
                        <a id="docs-site-logo" href="../../../" class="flex items-center leading-snug text-2xl">
                            <span class="w-10 mr-2 grow-0 shrink-0 overflow-hidden">
                                <img class="max-h-10 dark:hidden md:inline-block" src="../../../imagens-docstruct/logos/logo_struct.png">
                                <img class="max-h-10 hidden dark:inline-block" src="../../../imagens-docstruct/logos/logo_struct.png">
                            </span>
                            <span class="dark:text-white font-semibold line-clamp-1 md:line-clamp-2">DocStruct</span>
                        </a>
                    </div>
        
                    <span class="hidden h-8 border-r md:inline-block dark:border-dark-650"></span>
                </div>
        
                <div class="flex justify-between md:grow">
                    <!-- Top Nav -->
                    <nav class="hidden md:flex">
                        <ul class="flex flex-col mb-4 md:pl-16 md:mb-0 md:flex-row md:items-center">
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://github.com/StructCE/DocStruct">GitHub</a>
                            </li>
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://structce.github.io/DocStruct/components/introducao/">Componentes</a>
                            </li>
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://struct.gitbook.io/struct/">Documentação antiga</a>
                            </li>
        
                        </ul>
                    </nav>
        
                    <!-- Header Right Skeleton -->
                    <div v-cloak class="flex justify-end grow skeleton">
        
                        <!-- Search input mock -->
                        <div class="relative hidden w-40 lg:block lg:max-w-sm lg:ml-auto">
                            <div class="absolute flex items-center justify-center h-full pl-3 dark:text-dark-300">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon-base" width="16" height="16" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation" style="margin-bottom: 1px;"><g fill="currentColor" ><path d="M21.71 20.29l-3.68-3.68A8.963 8.963 0 0020 11c0-4.96-4.04-9-9-9s-9 4.04-9 9 4.04 9 9 9c2.12 0 4.07-.74 5.61-1.97l3.68 3.68c.2.19.45.29.71.29s.51-.1.71-.29c.39-.39.39-1.03 0-1.42zM4 11c0-3.86 3.14-7 7-7s7 3.14 7 7c0 1.92-.78 3.66-2.04 4.93-.01.01-.02.01-.02.01-.01.01-.01.01-.01.02A6.98 6.98 0 0111 18c-3.86 0-7-3.14-7-7z" ></path></g></svg>
                            </div>
                            <input class="w-full h-10 placeholder-gray-400 transition-colors duration-200 ease-in bg-gray-200 border border-transparent rounded md:text-sm hover:bg-white hover:border-gray-300 focus:outline-none focus:bg-white focus:border-gray-500 dark:bg-dark-600 dark:border-dark-600 dark:placeholder-dark-400" style="padding: 0.625rem 0.75rem 0.625rem 2rem" type="text" placeholder="Pesquisar">
                        </div>
        
                        <!-- Mobile search button -->
                        <div class="flex items-center justify-center w-10 h-10 lg:hidden">
                            <svg xmlns="http://www.w3.org/2000/svg" class="shrink-0 icon-base" width="20" height="20" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation" style="margin-bottom: 0px;"><g fill="currentColor" ><path d="M21.71 20.29l-3.68-3.68A8.963 8.963 0 0020 11c0-4.96-4.04-9-9-9s-9 4.04-9 9 4.04 9 9 9c2.12 0 4.07-.74 5.61-1.97l3.68 3.68c.2.19.45.29.71.29s.51-.1.71-.29c.39-.39.39-1.03 0-1.42zM4 11c0-3.86 3.14-7 7-7s7 3.14 7 7c0 1.92-.78 3.66-2.04 4.93-.01.01-.02.01-.02.01-.01.01-.01.01-.01.02A6.98 6.98 0 0111 18c-3.86 0-7-3.14-7-7z" ></path></g></svg>
                        </div>
        
                        <!-- Dark mode switch placeholder -->
                        <div class="w-10 h-10 lg:ml-2"></div>
        
                        <!-- History button -->
                        <div class="flex items-center justify-center w-10 h-10" style="margin-right: -0.625rem;">
                            <svg xmlns="http://www.w3.org/2000/svg" class="shrink-0 icon-base" width="22" height="22" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation" style="margin-bottom: 0px;"><g fill="currentColor" ><g ><path d="M12.01 6.01c-.55 0-1 .45-1 1V12a1 1 0 00.4.8l3 2.22a.985.985 0 001.39-.2.996.996 0 00-.21-1.4l-2.6-1.92V7.01c.02-.55-.43-1-.98-1z"></path><path d="M12.01 1.91c-5.33 0-9.69 4.16-10.05 9.4l-.29-.26a.997.997 0 10-1.34 1.48l1.97 1.79c.19.17.43.26.67.26s.48-.09.67-.26l1.97-1.79a.997.997 0 10-1.34-1.48l-.31.28c.34-4.14 3.82-7.41 8.05-7.41 4.46 0 8.08 3.63 8.08 8.09s-3.63 8.08-8.08 8.08c-2.18 0-4.22-.85-5.75-2.4a.996.996 0 10-1.42 1.4 10.02 10.02 0 007.17 2.99c5.56 0 10.08-4.52 10.08-10.08.01-5.56-4.52-10.09-10.08-10.09z"></path></g></g></svg>
                        </div>
                    </div>
        
                    <div v-cloak class="flex justify-end grow">
                        <div id="docs-mobile-search-button"></div>
                        <doc-search-desktop></doc-search-desktop>
        
                        <doc-theme-switch class="lg:ml-2"></doc-theme-switch>
                        <doc-history></doc-history>
                    </div>
                </div>
            </div>
        </header>
    
        <div class="container relative flex bg-white">
            <!-- Sidebar Skeleton -->
            <div v-cloak class="fixed flex flex-col shrink-0 duration-300 ease-in-out bg-gray-100 border-gray-200 sidebar top-20 w-75 border-r h-screen md:sticky transition-transform skeleton dark:bg-dark-800 dark:border-dark-650">
            
                <!-- Render this div, if config.showSidebarFilter is `true` -->
                <div class="flex items-center h-16 px-6">
                    <input class="w-full h-8 px-3 py-2 transition-colors duration-200 ease-linear bg-white border border-gray-200 rounded shadow-none text-sm focus:outline-none focus:border-gray-600 dark:bg-dark-600 dark:border-dark-600" type="text" placeholder="Filtrar">
                </div>
            
                <div class="pl-6 mt-1 mb-4">
                    <div class="w-32 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-48 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-40 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-32 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-48 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-40 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                </div>
            
                <div class="shrink-0 mt-auto bg-transparent dark:border-dark-650">
                    <a class="flex items-center justify-center flex-nowrap h-16 text-gray-400 dark:text-dark-400 hover:text-gray-700 dark:hover:text-dark-300 transition-colors duration-150 ease-in docs-powered-by" target="_blank" href="https://retype.com/" rel="noopener">
                        <span class="text-xs whitespace-nowrap">Powered by</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="ml-2" fill="currentColor" width="96" height="20" overflow="visible"><path d="M0 0v20h13.59V0H0zm11.15 17.54H2.44V2.46h8.71v15.08zM15.8 20h2.44V4.67L15.8 2.22zM20.45 6.89V20h2.44V9.34z"/><g><path d="M40.16 8.44c0 1.49-.59 2.45-1.75 2.88l2.34 3.32h-2.53l-2.04-2.96h-1.43v2.96h-2.06V5.36h3.5c1.43 0 2.46.24 3.07.73s.9 1.27.9 2.35zm-2.48 1.1c.26-.23.38-.59.38-1.09 0-.5-.13-.84-.4-1.03s-.73-.28-1.39-.28h-1.54v2.75h1.5c.72 0 1.2-.12 1.45-.35zM51.56 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92h4.74v1.83h-6.79V5.36h6.64zM60.09 7.15v7.48h-2.06V7.15h-2.61V5.36h7.28v1.79h-2.61zM70.81 14.64h-2.06v-3.66l-3.19-5.61h2.23l1.99 3.45 1.99-3.45H74l-3.19 5.61v3.66zM83.99 6.19c.65.55.97 1.4.97 2.55s-.33 1.98-1 2.51-1.68.8-3.04.8h-1.23v2.59h-2.06V5.36h3.26c1.42 0 2.45.28 3.1.83zm-1.51 3.65c.25-.28.37-.69.37-1.22s-.16-.92-.48-1.14c-.32-.23-.82-.34-1.5-.34H79.7v3.12h1.38c.68 0 1.15-.14 1.4-.42zM95.85 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92H96v1.83h-6.79V5.36h6.64z"/></g></svg>
                    </a>
                </div>
            </div>
            
            <!-- Sidebar component -->
            <doc-sidebar v-cloak>
                <template #sidebar-footer>
                    <div class="shrink-0 mt-auto border-t md:bg-transparent md:border-none dark:border-dark-650">
            
                        <div class="py-3 px-6 md:hidden border-b dark:border-dark-650">
                            <nav>
                                <ul class="flex flex-wrap justify-center items-center">
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://github.com/StructCE/DocStruct">GitHub</a>
                                    </li>
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://structce.github.io/DocStruct/components/introducao/">Componentes</a>
                                    </li>
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://struct.gitbook.io/struct/">Documentação antiga</a>
                                    </li>
            
                                </ul>
                            </nav>
                        </div>
            
                        <a class="flex items-center justify-center flex-nowrap h-16 text-gray-400 dark:text-dark-400 hover:text-gray-700 dark:hover:text-dark-300 transition-colors duration-150 ease-in docs-powered-by" target="_blank" href="https://retype.com/" rel="noopener">
                            <span class="text-xs whitespace-nowrap">Powered by</span>
                            <svg xmlns="http://www.w3.org/2000/svg" class="ml-2" fill="currentColor" width="96" height="20" overflow="visible"><path d="M0 0v20h13.59V0H0zm11.15 17.54H2.44V2.46h8.71v15.08zM15.8 20h2.44V4.67L15.8 2.22zM20.45 6.89V20h2.44V9.34z"/><g><path d="M40.16 8.44c0 1.49-.59 2.45-1.75 2.88l2.34 3.32h-2.53l-2.04-2.96h-1.43v2.96h-2.06V5.36h3.5c1.43 0 2.46.24 3.07.73s.9 1.27.9 2.35zm-2.48 1.1c.26-.23.38-.59.38-1.09 0-.5-.13-.84-.4-1.03s-.73-.28-1.39-.28h-1.54v2.75h1.5c.72 0 1.2-.12 1.45-.35zM51.56 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92h4.74v1.83h-6.79V5.36h6.64zM60.09 7.15v7.48h-2.06V7.15h-2.61V5.36h7.28v1.79h-2.61zM70.81 14.64h-2.06v-3.66l-3.19-5.61h2.23l1.99 3.45 1.99-3.45H74l-3.19 5.61v3.66zM83.99 6.19c.65.55.97 1.4.97 2.55s-.33 1.98-1 2.51-1.68.8-3.04.8h-1.23v2.59h-2.06V5.36h3.26c1.42 0 2.45.28 3.1.83zm-1.51 3.65c.25-.28.37-.69.37-1.22s-.16-.92-.48-1.14c-.32-.23-.82-.34-1.5-.34H79.7v3.12h1.38c.68 0 1.15-.14 1.4-.42zM95.85 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92H96v1.83h-6.79V5.36h6.64z"/></g></svg>
                        </a>
                    </div>
                </template>
            </doc-sidebar>
    
            <div class="grow min-w-0 dark:bg-dark-850">
                <!-- Render "toolbar" template here on api pages --><!-- Render page content -->
                <div class="flex">
                    <div class="min-w-0 p-4 grow md:px-16">
                        <main class="relative pb-12 lg:pt-2">
                            <div class="docs-markdown" id="docs-content">
                                <!-- Rendered if sidebar right is enabled -->
                                <div id="docs-sidebar-right-toggle"></div>
                                <!-- Page content  -->
<doc-anchor-target id="guia-de-uso-nextauth-com-t3" class="break-words">
    <h1>
        <doc-anchor-trigger class="header-anchor-trigger" to="#guia-de-uso-nextauth-com-t3">#</doc-anchor-trigger>
        <span>Guia de uso NextAuth com T3</span>
    </h1>
</doc-anchor-target>
<div class="-mt-3 mb-12 flex flex-wrap text-sm text-gray-400 dark:text-dark-350 items-center">
    <div class="flex items-center">
        <div>Por</div>
        <div class="ml-2 flex items-center">
          <div class="shrink-0 w-8 h-8 overflow-hidden rounded-full">
            <img class="object-cover" src="../../../imagens-docstruct/pessoas/gata_do_will.png">
          </div>
          <div class="ml-1 whitespace-nowrap text-gray-500 dark:text-dark-350">Willyan Marques</div>
        </div>
        <div>,</div>
        <div class="ml-2 flex items-center">
          <div class="shrink-0 w-8 h-8 overflow-hidden rounded-full">
            <svg width="2rem" height="2rem" xmlns="http://www.w3.org/2000/svg" fill="white"><g><rect width="2rem" height="1.7rem" fill="#c5c5c5"/><circle r="0.44rem" cy="0.83rem" cx="1rem"/><ellipse ry="0.96rem" rx="0.77rem" cy="2.15rem" cx="1rem"/></g></svg>
          </div>
          <div class="ml-1 whitespace-nowrap text-gray-500 dark:text-dark-350">João Santos</div>
        </div>
    </div>
    <div class="mx-2">&#9679;</div>
    <div>Em&nbsp;</div>
    <div><a href="../../../categories/implementa%C3%A7%C3%A3o/">Implementação</a></div>
    <div class="mx-2">&#9679;</div>
    <div class="flex items-center shrink-0">Publicado&nbsp;<span>2024-02-28</span></div>
</div>

<div class="flex mb-6">
    <div class="shrink-0 w-1 rounded-tl rounded-bl bg-yellow-500"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-yellow-500" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M22.48 15.59L14.01 1.45A2.968 2.968 0 0012.16.09c-.78-.19-1.58-.07-2.27.35-.41.25-.76.6-1.01 1.01v.01L.4 15.6c-.83 1.43-.33 3.27 1.1 4.1.45.26.95.4 1.48.4h16.95c.8-.01 1.55-.33 2.11-.9.56-.57.87-1.33.86-2.13a3.04 3.04 0 00-.42-1.48zm-1.87 2.21c-.19.19-.44.3-.69.3H2.99c-.17 0-.34-.05-.49-.13a.992.992 0 01-.37-1.35L10.6 2.48c.08-.14.2-.25.34-.33a.992.992 0 011.37.33l8.46 14.13c.09.15.13.32.13.49 0 .26-.1.51-.29.7z"></path>
                    <path d="M11.45 12.1c.55 0 1-.45 1-1v-4c0-.55-.45-1-1-1s-1 .45-1 1v4c0 .56.45 1 1 1zM11.46 14.1c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3 w-full">
            <h5><strong>Atenção!! A documentação a seguir assume que você está utilizando o <em>App Router</em> do Next.js</strong></h5>
        </div>
    </div>
</div>
<doc-anchor-target id="instalação">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#instalação">#</doc-anchor-trigger>
        <span>Instalação</span>
    </h2>
</doc-anchor-target>
<p>Para adicionar o <code v-pre>NextAuth</code> a um projeto <code v-pre>Next.js</code> basta acessar a raiz do repositório pelo terminal e executar um dos comandos abaixo de acordo com o gerenciador de pacotes sendo utilizado:</p>
<doc-tabs>
<doc-tab v-cloak id="npm">
<template #title>NPM</template>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash">npm install next-auth</code></pre>
</doc-codeblock></div>
</doc-tab>
<doc-tab v-cloak id="pnpm">
<template #title>PNPM</template>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash">pnpm add next-auth</code></pre>
</doc-codeblock></div>
</doc-tab>
<doc-tab v-cloak id="yarn">
<template #title>YARN</template>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash">yarn add next-auth</code></pre>
</doc-codeblock></div>
</doc-tab>
</doc-tabs>
<doc-anchor-target id="providers">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#providers">#</doc-anchor-trigger>
        <span>Providers</span>
    </h2>
</doc-anchor-target>
<p>O Next Auth possibilita que o critério de autenticação (provedores) seja por meio de credenciais customizáveis (nome, senha, email, etc) ou por provedores externos (Google, GitHub, Discord, etc).</p>
<doc-anchor-target id="oauth-externo">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#oauth-externo">#</doc-anchor-trigger>
        <span>OAuth (Externo)</span>
    </h3>
</doc-anchor-target>
<p>OAuth (Open Authorization) é um protocolo de autorização que permite que um aplicativo obtenha acesso limitado a uma conta em um serviço de terceiros sem revelar credenciais de login.</p>
<p>Ele é o principal processo de autenticação utilizando por empresas na atualidade e é oferecido pelo NextAuth através de provedores de login externos preexistentes. A partir do OAuth, o usúario é capaz de realizar a autenticação por meio de outra plataforma como Google, Github, Discord, etc.</p>
<p>Por serem processos externos de várias fontes diferentes, cada autenticação escolhida terá uma documentação específica diferente. Para ter mais detalhes sobre provedores específicos oferecidos pelo NextAuth acesse suas <a href="https://next-auth.js.org/providers/">respectivas documentações</a>.</p>
<p>Você deve definir os provedores dentro de <code v-pre>authOptions</code> no arquivo <code v-pre>src/server/auth.ts</code></p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">src/server/auth.ts</div>
<pre class="language-javascript"><code v-pre class="language-javascript">import NextAuth from &quot;next-auth&quot;;
import GoogleProvider from &quot;next-auth/providers/google&quot;;

export const authOptions: NextAuthOptions = {
  // ...
  // Configure um ou mais provedores de autenticação
  providers: [
    GoogleProvider({
      clientId: process.env.GOOGLE_ID,
      clientSecret: process.env.GOOGLE_SECRET,
    }),

    // ...adicione mais provedores aqui. Exemplo:
    // DiscordProvider({
    //   clientId: env.DISCORD_CLIENT_ID,
    //   clientSecret: env.DISCORD_CLIENT_SECRET,
    // }),
  ],
};

export default NextAuth(authOptions);</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="como-conseguir-as-credenciais-para-a-autenticação-externa-next-auth-google">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#como-conseguir-as-credenciais-para-a-autenticação-externa-next-auth-google">#</doc-anchor-trigger>
        <span>Como conseguir as credenciais para a autenticação externa Next auth (Google)</span>
    </h4>
</doc-anchor-target>
<p>Utilizarei o exemplo do Google como autenticador externo, pela grande gama de <a href="https://developers.google.com/identity/protocols/oauth2?hl=pt-br">documentação</a> disponível.</p>
<p>Para configurar a autenticação com o Next Auth usando o Google como provedor, você precisará obter as credenciais apropriadas do Google. Siga estas etapas:</p>
<ol>
<li><p>Acesse o <a href="https://console.developers.google.com/apis/credentials">Console de Desenvolvedores do Google</a>.</p>
</li>
<li><p>Com o projeto criado e/ou adicionado na plataforma, na barra de opções lateral clique no item <code v-pre>Credenciais</code> e em seguida, no botão <code v-pre>Criar credenciais</code>, escolha <code v-pre>ID do cliente OAuth</code> como tipo de credencial, e configure as informações do OAuth de acordo com as necessidades do projeto e seguindo as intruções.</p>
</li>
<li><p>Preencha o campo <code v-pre>Tipo de aplicativo</code> com a opção <code v-pre>Aplicativo da Web</code>, nas seções <code v-pre>Origens JavaScript autorizadas</code> e <code v-pre>URLs de redirecionamento autorizados</code>, adicione URLs de acordo com a natureza do aplicativo, por exemplo, vale colocar <code v-pre>http://localhost:3000</code> e <code v-pre>http://localhost:3000/api/auth/callback/google</code> respectivamente, para uma aplicação que está rodando localmente. E , por fim ,clique em <code v-pre>Criar</code>.
OBS:A segunda URL depende de como foram implementadas as rotas no projeto!!</p>
</li>
<li><p>Após a criação do cliente OAuth, serão exibidos O <code v-pre>ID do cliente</code> e a <code v-pre>Chave secreta do cliente</code>.</p>
</li>
<li><p>Por fim, crie um arquivo <code v-pre>.env</code> para guardar essas informações.Como no exemplo:</p>
</li>
</ol>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash"># Next Auth
# You can generate a new secret on the command line with:
# openssl rand -base64 32
# https://next-auth.js.org/configuration/options#secret
# This variable is necessary for production
# NEXTAUTH_SECRET=&quot;&quot;

NEXTAUTH_URL=&quot;http://localhost:3000&quot;

# Next Auth GOOGLE Provider
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=</code></pre>
</doc-codeblock></div>
<p>Com as credenciais armazenadas de forma segura em seu arquivo .env, você pode configurar a autenticação com o provedor do Google de maneira segura e eficaz em seu projeto Next Auth.</p>
<doc-anchor-target id="credentials-interno">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#credentials-interno">#</doc-anchor-trigger>
        <span>Credentials (Interno)</span>
    </h3>
</doc-anchor-target>
<div class="flex mb-6">
    <div class="shrink-0 w-1 rounded-tl rounded-bl bg-yellow-500"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-yellow-500" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M22.48 15.59L14.01 1.45A2.968 2.968 0 0012.16.09c-.78-.19-1.58-.07-2.27.35-.41.25-.76.6-1.01 1.01v.01L.4 15.6c-.83 1.43-.33 3.27 1.1 4.1.45.26.95.4 1.48.4h16.95c.8-.01 1.55-.33 2.11-.9.56-.57.87-1.33.86-2.13a3.04 3.04 0 00-.42-1.48zm-1.87 2.21c-.19.19-.44.3-.69.3H2.99c-.17 0-.34-.05-.49-.13a.992.992 0 01-.37-1.35L10.6 2.48c.08-.14.2-.25.34-.33a.992.992 0 011.37.33l8.46 14.13c.09.15.13.32.13.49 0 .26-.1.51-.29.7z"></path>
                    <path d="M11.45 12.1c.55 0 1-.45 1-1v-4c0-.55-.45-1-1-1s-1 .45-1 1v4c0 .56.45 1 1 1zM11.46 14.1c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3 w-full">
<p>É <strong>necessário ter um serviço de autenticação externo, ou criar um do zero</strong>, para poder usar o CredentialsProvider de forma realmente útil! O NextAuth nesse caso é muito menos útil! Considere recorrer a outras bibliotecas, como <a href="https://lucia-auth.com/">Lucia Auth</a> ou <a href="https://www.npmjs.com/package/bcrypt">bcrypt</a> para criptografar senhas.</p>
        </div>
    </div>
</div>
<p>O <code v-pre>credentials provider</code> permite lidar com o login usando credenciais arbitrárias, como nome de usuário e senha. A validação de sessão com base no banco de dados deve ser realizada de forma manual por meio da função <code v-pre>authorize()</code> na configuração dos providers no NextAuth.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">src/app/api/auth/[...nextauth]/route.ts</div>
<pre class="language-javascript"><code v-pre class="language-javascript">
import CredentialsProvider from &quot;next-auth/providers/credentials&quot;;
import { prisma } from &quot;~/server/db&quot;;
...
providers: [
  CredentialsProvider({
    // O nome exibido no formulário de login (por exemplo, 'Entrar com...')
    name: &quot;Credentials&quot;,

    // 'credentials' é usado para gerar um formulário na página de login.
    // Você pode especificar quais campos devem ser enviados, adicionando chaves ao objeto 'credentials'
    // por exemplo, domínio, nome de usuário, senha, token de autenticação de dois fatores, etc.
    // Você pode passar qualquer atributo HTML para a tag &lt;input&gt; por meio do objeto.
    credentials: {
      email: {
        label: &quot;Email&quot;,
        type: &quot;email&quot;,
        placeholder: &quot;exemplo@gmail.com&quot;
      },
      password: {
        label: &quot;Password&quot;,
        type: &quot;password&quot;,
        placeholder: `digite sua senha`,
      },
    },

    async authorize(credentials, req) {
      // Verifica algum campo é vazio
      if (!credentials?.email || !credentials.password) {
        return null //não lança erro
      };

      // Procura o usuário na database
      const user = await prisma.user.findUnique({
        where: { email: credentials.email },
      });

      if (!user) {
        return null
      };

      // Compara a senha passada com a senha do bd
      // PERIGO!!! Senha do bd não está criptografada!
      if (credentials.password !== user.password) {
        return null
      };

      // Qualquer objeto retornado será salvo na propriedade user
      return {
        id: user.id + '',
        name: user.name,
        email: user.email,
        image: user.image,
        isAuthorized: user.isAuthorized,
      }
    }
  })
]
...
</code></pre>
</doc-codeblock></div>
<div class="flex mb-6">
    <div class="shrink-0 w-1 rounded-tl rounded-bl bg-blue-500 dark:bg-blue-400"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-blue-500 dark:text-blue-400" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M12 1C5.93 1 1 5.93 1 12s4.93 11 11 11 11-4.93 11-11S18.07 1 12 1zm0 20c-4.96 0-9-4.04-9-9s4.04-9 9-9 9 4.04 9 9-4.04 9-9 9z"></path>
                    <path d="M12 11c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1v-4c0-.55-.45-1-1-1zM12.01 7c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                    <path fill="none" d="M0 0h24v24H0z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3 w-full">
<p>Você também pode rejeitar este retorno de chamada com um erro, assim o <code v-pre>client-side</code> pode lidar com o erro dependendo do status e da mensagem passada como um parâmetro de consulta. No tratamento desse erro o usuário pode, por exemplo, receber um aviso ou ser redirecionado para uma página de registro, ajuda, etc.</p>
        </div>
    </div>
</div>
<doc-anchor-target id="route-handler">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#route-handler">#</doc-anchor-trigger>
        <span>Route Handler</span>
    </h2>
</doc-anchor-target>
<p>Se você precisa buscar dados do servidor em um <code v-pre>client component</code>, você pode chamar um <code v-pre>Route Handler</code> (manipulador de rota).
Os manipuladores de rota são executados no servidor e retornam os dados para o cliente. Eles devem ser utilizados quando você não quer expor informações confidenciais ao cliente, como tokens.</p>
<p>No caso do NextAuth, temos um handler padrão definido que é executado sempre que a API de autenticação é chamada na rota <code v-pre>api/auth</code>. Ele é necessário para o funcionamento das funções <code v-pre>SignIn()</code>, <code v-pre>SignOut()</code> entre outras coisas.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">src/app/api/auth/[...nextauth]/route.ts</div>
<pre class="language-javascript"><code v-pre class="language-javascript">import NextAuth from &quot;next-auth/next&quot;;
import { authOptions } from &quot;~/server/auth&quot;;

const handler = NextAuth(authOptions);

// você pode adicionar mais exports compatíveis
export { handler as GET, handler as POST };</code></pre>
</doc-codeblock></div>
<div class="flex mb-6">
    <div class="shrink-0 w-1 rounded-tl rounded-bl bg-blue-500 dark:bg-blue-400"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-blue-500 dark:text-blue-400" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M12 1C5.93 1 1 5.93 1 12s4.93 11 11 11 11-4.93 11-11S18.07 1 12 1zm0 20c-4.96 0-9-4.04-9-9s4.04-9 9-9 9 4.04 9 9-4.04 9-9 9z"></path>
                    <path d="M12 11c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1v-4c0-.55-.45-1-1-1zM12.01 7c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                    <path fill="none" d="M0 0h24v24H0z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3 w-full">
<p>Projetos criados a partir da stack do T3 separam o <code v-pre>authOptions</code> do <code v-pre>route handler</code> por questão de organização e modularidade. Para saber mais sobre a configuração NextAuth acesse a <a href="https://next-auth.js.org/configuration/options#options">documentação do authOptions</a>. Veja também um exemplo de uso em <doc-anchor-trigger to="#session-callback">Session Callback</doc-anchor-trigger></p>
        </div>
    </div>
</div>
<doc-anchor-target id="session">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#session">#</doc-anchor-trigger>
        <span>Session</span>
    </h2>
</doc-anchor-target>
<!-- !!!warning **Atenção:**

Caso você tenha criado o projeto utilizando a **stack do T3** _não é necessário_ configurar o nextauth manualmente.

Caso contário, verifique a versão do Next.js utilizada no projeto e se o tipo de roteamento usado é o `Pages Router` ou o `App Router`, pois o modo de implementação é diferente.
!!! -->
<doc-anchor-target id="controle">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#controle">#</doc-anchor-trigger>
        <span>Controle</span>
    </h3>
</doc-anchor-target>
<p>O NextAuth provê medidas de controle de sessão para que você consiga iniciar (SignIn) e encerrar (SignOut) sessões facilmente.</p>
<div class="flex mb-6">
    <div class="shrink-0 w-1 rounded-tl rounded-bl bg-yellow-500"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-yellow-500" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M22.48 15.59L14.01 1.45A2.968 2.968 0 0012.16.09c-.78-.19-1.58-.07-2.27.35-.41.25-.76.6-1.01 1.01v.01L.4 15.6c-.83 1.43-.33 3.27 1.1 4.1.45.26.95.4 1.48.4h16.95c.8-.01 1.55-.33 2.11-.9.56-.57.87-1.33.86-2.13a3.04 3.04 0 00-.42-1.48zm-1.87 2.21c-.19.19-.44.3-.69.3H2.99c-.17 0-.34-.05-.49-.13a.992.992 0 01-.37-1.35L10.6 2.48c.08-.14.2-.25.34-.33a.992.992 0 011.37.33l8.46 14.13c.09.15.13.32.13.49 0 .26-.1.51-.29.7z"></path>
                    <path d="M11.45 12.1c.55 0 1-.45 1-1v-4c0-.55-.45-1-1-1s-1 .45-1 1v4c0 .56.45 1 1 1zM11.46 14.1c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3 w-full">
<p>Não existe função &quot;SignUp&quot; para registro de usuários! Usando autenticação externa o SignUp é feito no SignIn caso os dados ainda não estejam no banco de dados, já usando credentials o signUp deve ser feito manualmente. Você pode fazer o controle de login e o registro de usuários a partir do <doc-anchor-trigger to="#signin-callback">SignIn Callback</doc-anchor-trigger>.</p>
        </div>
    </div>
</div>
<doc-anchor-target id="signin">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#signin">#</doc-anchor-trigger>
        <span>SignIn()</span>
    </h4>
</doc-anchor-target>
<div class="flex mb-6">
    <div class="shrink-0 w-1 rounded-tl rounded-bl bg-blue-500 dark:bg-blue-400"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-blue-500 dark:text-blue-400" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M12 1C5.93 1 1 5.93 1 12s4.93 11 11 11 11-4.93 11-11S18.07 1 12 1zm0 20c-4.96 0-9-4.04-9-9s4.04-9 9-9 9 4.04 9 9-4.04 9-9 9z"></path>
                    <path d="M12 11c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1v-4c0-.55-.45-1-1-1zM12.01 7c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                    <path fill="none" d="M0 0h24v24H0z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3 w-full">
<p>Execução:</p>
<ul>
<li><p>Client-Side: <strong>YES</strong></p>
</li>
<li><p>Server-Side: <strong>NO</strong></p>
</li>
</ul>
        </div>
    </div>
</div>
<p>Por padrão, ao chamar o método <code v-pre>signIn()</code> sem argumentos, você será redirecionado para a página de login do NextAuth dentro da rota <code v-pre>/api/auth/session</code>. Essa página possui uma interface básica que lista todos os provedores de autenticação inseridos no <code v-pre>authOptions</code>, mas não pode ser personalizada e expõe a rota api ao usuário.</p>
<doc-anchor-target id="provedor-externo">
    <h5>
        <doc-anchor-trigger class="header-anchor-trigger" to="#provedor-externo">#</doc-anchor-trigger>
        <span>Provedor externo</span>
    </h5>
</doc-anchor-target>
<p>Você pode redirecionar o usuário diretamente para a página seu provedor de autenticação externo passando o <code v-pre>id</code> do provedor dentro de <code v-pre>signIn()</code>.
Além disso, você pode especificar para qual página o usuário irá retornar após o login passando uma Url no segundo argumento da função.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">googleSignInButton.tsx</div>
<pre class="language-javascript"><code v-pre class="language-javascript">import { signIn } from &quot;next-auth/react&quot;;

export default function GoogleSignInButton() {
  return (
    &lt;button
      onClick={() =&gt; signIn(&quot;google&quot;, { callbackUrl: &quot;/user/profile&quot; });
      }
    &gt;
      Sign in with Google
    &lt;/button&gt;
  );
}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="provedor-interno">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#provedor-interno">#</doc-anchor-trigger>
        <span>Provedor interno</span>
    </h4>
</doc-anchor-target>
<p>No caso do <code v-pre>crendentials</code> ou <code v-pre>email</code> provider, além das opções acima, você tem a possibilidade lidar com a resposta do <code v-pre>SignIn()</code> na <strong>sua própria página de login/cadastro</strong> em que a função é chamada ao <strong>desabilitar seu redirecionamento padrão</strong>. Por exemplo, se ocorrer um erro (como credenciais incorretas fornecidas pelo usuário), você pode querer tratar o erro na mesma página. Para isso, você pode passar <code v-pre>redirect: false</code> dentro do segundo parâmetro da função.</p>
<div class="flex mb-6">
    <div class="shrink-0 w-1 rounded-tl rounded-bl bg-yellow-500"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-yellow-500" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M22.48 15.59L14.01 1.45A2.968 2.968 0 0012.16.09c-.78-.19-1.58-.07-2.27.35-.41.25-.76.6-1.01 1.01v.01L.4 15.6c-.83 1.43-.33 3.27 1.1 4.1.45.26.95.4 1.48.4h16.95c.8-.01 1.55-.33 2.11-.9.56-.57.87-1.33.86-2.13a3.04 3.04 0 00-.42-1.48zm-1.87 2.21c-.19.19-.44.3-.69.3H2.99c-.17 0-.34-.05-.49-.13a.992.992 0 01-.37-1.35L10.6 2.48c.08-.14.2-.25.34-.33a.992.992 0 011.37.33l8.46 14.13c.09.15.13.32.13.49 0 .26-.1.51-.29.7z"></path>
                    <path d="M11.45 12.1c.55 0 1-.45 1-1v-4c0-.55-.45-1-1-1s-1 .45-1 1v4c0 .56.45 1 1 1zM11.46 14.1c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3 w-full">
<p>A opção de <code v-pre>redirect</code> só funciona para <code v-pre>credentials</code> e <code v-pre>email</code> providers.</p>
        </div>
    </div>
</div>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">login/page.tsx</div>
<pre class="language-javascript"><code v-pre class="language-javascript">import { signIn, useSession } from &quot;next-auth/react&quot;;
import { useState } from &quot;react&quot;;
export default function LoginPage() {
  //hook para ter acesso ao resultado do SignIn
  const [signInResponse, setSignInResponse] = useState(null);
  const [password, setPassword] = useState(null);

  const handleSignIn = async () =&gt; {
    const response = await signIn(&quot;credentials&quot;, {
      redirect: false,
      // callbackUrl: &quot;/user/profile&quot;,
      password: password,
    });
    setSignInResponse(response);
  };

  // Formulário de login
  // ...
  // ...
  // Botão de login:
  &lt;button onClick={handleSignIn}&gt;Sign in&lt;/button&gt;;
}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="signout">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#signout">#</doc-anchor-trigger>
        <span>SignOut()</span>
    </h4>
</doc-anchor-target>
<div class="flex mb-6">
    <div class="shrink-0 w-1 rounded-tl rounded-bl bg-blue-500 dark:bg-blue-400"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-blue-500 dark:text-blue-400" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M12 1C5.93 1 1 5.93 1 12s4.93 11 11 11 11-4.93 11-11S18.07 1 12 1zm0 20c-4.96 0-9-4.04-9-9s4.04-9 9-9 9 4.04 9 9-4.04 9-9 9z"></path>
                    <path d="M12 11c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1v-4c0-.55-.45-1-1-1zM12.01 7c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                    <path fill="none" d="M0 0h24v24H0z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3 w-full">
<p>Execução:</p>
<ul>
<li><p>Client-Side: <strong>YES</strong></p>
</li>
<li><p>Server-Side: <strong>NO</strong></p>
</li>
</ul>
        </div>
    </div>
</div>
<p>Quando chamado, o método <code v-pre>signOut()</code> encerra a sessão e por padrão redireciona o usuário à página inicial (<code v-pre>/</code>). Como na função de login você pode especificar o <code v-pre>callbackUrl</code> dentro do segundo parâmetro ou desativar o redirecionamento utilizando <code v-pre>redirect: false</code>.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">signOutButton.tsx</div>
<pre class="language-javascript"><code v-pre class="language-javascript">import { signOut } from &quot;next-auth/react&quot;;

export default function SignOutButton() {
  return (
    &lt;button
      onClick={() =&gt; signOut({ redirect: true, callbackUrl: &quot;/homepage&quot; })}
    &gt;
      Sign out
    &lt;/button&gt;
  );
}</code></pre>
</doc-codeblock></div>
<div class="flex mb-6">
    <div class="shrink-0 w-1 rounded-tl rounded-bl bg-blue-500 dark:bg-blue-400"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-blue-500 dark:text-blue-400" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M12 1C5.93 1 1 5.93 1 12s4.93 11 11 11 11-4.93 11-11S18.07 1 12 1zm0 20c-4.96 0-9-4.04-9-9s4.04-9 9-9 9 4.04 9 9-4.04 9-9 9z"></path>
                    <path d="M12 11c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1v-4c0-.55-.45-1-1-1zM12.01 7c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                    <path fill="none" d="M0 0h24v24H0z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3 w-full">
<p>Se após o logout você precisar redirecionar para outra página sem recarregar a atual, você pode capturar a resposta da chamada da função: <code v-pre>const response = await signOut({redirect: false, callbackUrl: &quot;/homepage&quot;})</code>.</p>
<p>Nessa linha, <code v-pre>response.url</code> é a URL validada para a qual você pode redirecionar o usuário, usando <code v-pre>useRouter().push(response.url)</code> do Next.js.</p>
        </div>
    </div>
</div>
<doc-anchor-target id="session-fetching">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#session-fetching">#</doc-anchor-trigger>
        <span>Session Fetching</span>
    </h3>
</doc-anchor-target>
<doc-anchor-target id="usesession">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#usesession">#</doc-anchor-trigger>
        <span>useSession()</span>
    </h4>
</doc-anchor-target>
<div class="flex mb-6">
    <div class="shrink-0 w-1 rounded-tl rounded-bl bg-blue-500 dark:bg-blue-400"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-blue-500 dark:text-blue-400" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M12 1C5.93 1 1 5.93 1 12s4.93 11 11 11 11-4.93 11-11S18.07 1 12 1zm0 20c-4.96 0-9-4.04-9-9s4.04-9 9-9 9 4.04 9 9-4.04 9-9 9z"></path>
                    <path d="M12 11c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1v-4c0-.55-.45-1-1-1zM12.01 7c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                    <path fill="none" d="M0 0h24v24H0z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3 w-full">
<p>Execução:</p>
<ul>
<li><p>Client-Side: <strong>YES</strong></p>
</li>
<li><p>Server-Side: <strong>NO</strong></p>
</li>
</ul>
        </div>
    </div>
</div>
<p>O <code v-pre>useSession</code> é um importante hook do React que é utilizado nas aplicações Next Auth para recuperar informações da sessão de usuário. Para utilizá-lo primeiro é preciso expor o conteudo da sessão de usuário por meio do <code v-pre>&lt;SessionProvider&gt;</code>. Para saber como utilizar o <code v-pre>SessionProvider</code>, vá para a seção <doc-anchor-trigger to="#prote%C3%A7%C3%A3o-de-rotas">Proteção de Rotas</doc-anchor-trigger>.</p>
<doc-anchor-target id="exemplo">
    <h5>
        <doc-anchor-trigger class="header-anchor-trigger" to="#exemplo">#</doc-anchor-trigger>
        <span>Exemplo</span>
    </h5>
</doc-anchor-target>
<p>O Hook do React <code v-pre>useSession</code> pode ser usado como uma maneira simples de verificar se alguém está autenticado ou não:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">src/components/auth/sessionControlButton.tsx</div>
<pre class="language-javascript"><code v-pre class="language-javascript">&quot;use client&quot;;
import React from &quot;react&quot;;
import { signIn, signOut, useSession } from &quot;next-auth/react&quot;;

const SessionControlButton = () =&gt; {
  const { data: session } = useSession(); // hook que pega os dados da sessão

  //se não existir a sessão ou o usuário, mostra o botão de login
  if (!session || !session.user) {
    return &lt;button onClick={() =&gt; signIn()}&gt;Sign In&lt;/button&gt;;
  } else {
    //caso contrário, mostra os dados e a opção de SignOut
    return (
      &lt;div&gt;
        &lt;p&gt;{session.user.name}&lt;/p&gt;
        &lt;button onClick={() =&gt; signOut()}&gt;Sign Out&lt;/button&gt;
      &lt;/div&gt;
    );
  }
};

export default SessionControlButton;</code></pre>
</doc-codeblock></div>
<p>A ideia é armazenar os resultados do <code v-pre>useSession</code> em props para aferir se o usuário ja foi autenticado, assim você pode criar componentes que se comportam de maneiras diferentes caso o usuário esteja logado ou não. Um outro exemplo de uso poderia ser uma foto de perfil em uma navbar, que mostra um icone default ou a foto do usuário dependendo da sessão.</p>
<doc-anchor-target id="getserversession">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#getserversession">#</doc-anchor-trigger>
        <span>getServerSession()</span>
    </h4>
</doc-anchor-target>
<div class="flex mb-6">
    <div class="shrink-0 w-1 rounded-tl rounded-bl bg-blue-500 dark:bg-blue-400"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-blue-500 dark:text-blue-400" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M12 1C5.93 1 1 5.93 1 12s4.93 11 11 11 11-4.93 11-11S18.07 1 12 1zm0 20c-4.96 0-9-4.04-9-9s4.04-9 9-9 9 4.04 9 9-4.04 9-9 9z"></path>
                    <path d="M12 11c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1v-4c0-.55-.45-1-1-1zM12.01 7c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                    <path fill="none" d="M0 0h24v24H0z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3 w-full">
<p>Acesso:</p>
<ul>
<li><p>Client-Side: <strong>NO</strong></p>
</li>
<li><p>Server-Side: <strong>YES</strong></p>
</li>
</ul>
        </div>
    </div>
</div>
<p>Como o nome já diz, o <code v-pre>getServerSession</code> é utilizado para obter a sessão no <code v-pre>server-side</code>, fazendo os fetches e renderizações no servidor antes de serem passados para o usuário. Geralmente ele é utilizando em contextos de <code v-pre>Route Handlers</code>, <code v-pre>React Server Components</code>, <code v-pre>rotas API</code> ou no <code v-pre>getServerSideProps</code></p>
<doc-anchor-target id="exemplo-app-router">
    <h5>
        <doc-anchor-trigger class="header-anchor-trigger" to="#exemplo-app-router">#</doc-anchor-trigger>
        <span>Exemplo (App Router)</span>
    </h5>
</doc-anchor-target>
<p>Para pegar os dados no server side dentro das páginas no <code v-pre>App Router</code>, você precisa importar o <code v-pre>authOptions</code> e passar dentro da função.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-javascript"><code v-pre class="language-javascript">import { getServerSession } from &quot;next-auth/next&quot;;
import { authOptions } from &quot;~/server/auth&quot;;

export default async function Page() {
  // Use se não estiver usando um sessionProvider, caso contrário use useSession()
  const session = await getServerSession(authOptions);
  ...
}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="getserverauthsession-t3-stack">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#getserverauthsession-t3-stack">#</doc-anchor-trigger>
        <span>getServerAuthSession() [<em>T3 stack</em>]</span>
    </h4>
</doc-anchor-target>
<div class="flex mb-6">
    <div class="shrink-0 w-1 rounded-tl rounded-bl bg-blue-500 dark:bg-blue-400"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-blue-500 dark:text-blue-400" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M12 1C5.93 1 1 5.93 1 12s4.93 11 11 11 11-4.93 11-11S18.07 1 12 1zm0 20c-4.96 0-9-4.04-9-9s4.04-9 9-9 9 4.04 9 9-4.04 9-9 9z"></path>
                    <path d="M12 11c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1v-4c0-.55-.45-1-1-1zM12.01 7c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                    <path fill="none" d="M0 0h24v24H0z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3 w-full">
<p>Execução:</p>
<ul>
<li><p>Client-Side: <strong>NO</strong></p>
</li>
<li><p>Server-Side: <strong>YES</strong></p>
</li>
</ul>
        </div>
    </div>
</div>
<p>A stack do T3 oferece a função auxiliar <code v-pre>getServerAuthSession</code> para fazer o pre-fetch da sessão no server-side. Essa função é parecida com a <code v-pre>getServerSession</code>, mas com a vantagem de que você não precisa importar o <code v-pre>authOptions</code> toda vez que você precisar realizar um pre-fetch da sessão.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-javascript"><code v-pre class="language-javascript">import { getServerAuthSession } from &quot;~/server/auth&quot;;

export default function HomePage() {
  // Use se não estiver usando um sessionProvider, caso contrário use useSession()
  const session = getServerAuthSession();
  return &lt;pre&gt;{JSON.stringify(session.user)}&lt;/pre&gt;;
}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="callbacks">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#callbacks">#</doc-anchor-trigger>
        <span>Callbacks</span>
    </h2>
</doc-anchor-target>
<doc-anchor-target id="session-callback">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#session-callback">#</doc-anchor-trigger>
        <span>Session Callback</span>
    </h3>
</doc-anchor-target>
<p>O <code v-pre>session callback</code> é chamado sempre que uma sessão é verificada (<code v-pre>getSession()</code>, <code v-pre>getServerSession()</code>, <code v-pre>/api/auth/session</code>, etc).</p>
<p><strong>Por padrão, apenas uma parte do token é retornado como medida de segurança</strong>, mas podemos facilmente personalizar quais dados de sessão são retornados. Para isso, a stack do T3 traz uma conexão pronta entre a sessão e a database a partir da model <code v-pre>User</code> definida no Prisma e com isso podemos passar parâmetros extras e acessá-los utilizando os <code v-pre>fetches</code> de sessão no <code v-pre>client-side</code>.</p>
<p>Podemos também passar parâmetros extras retirados da database e passá-los junto com os dados de sessão padrão (dependem do <code v-pre>Session Provider</code>, no caso do google são <code v-pre>email</code>, <code v-pre>name</code> e <code v-pre>image</code>)</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-go"><code v-pre class="language-go">model User {
    id            String    @id @default(cuid())
    name          String?
    email         String?   @unique
    emailVerified DateTime?
    image         String?
    accounts      Account[]
    sessions      Session[]
    newParam      String // novo parâmetro
}
</code></pre>
</doc-codeblock></div>
<p>Para fazer com que o session inclua esse novo parâmetro, basta ir no arquivo de configurações do NextAuth em <code v-pre>src/server/auth.ts</code> e adicionar esse parâmetro ao <code v-pre>session callback</code> do <code v-pre>authOptions</code>:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-javascript"><code v-pre class="language-javascript">export const authOptions: NextAuthOptions = {
  callbacks: {
    session: ({ session, user }) =&gt; ({
      ...session, // parâmetros default da session
      user: {     // usuário da session
        ...session.user, // parâmetros default
        newParam: user.newParam      // novo parâmetro para o objeto user da session
      },
    }),
  },</code></pre>
</doc-codeblock></div>
<p>Quando você adicionar esse novo parâmetro ele já será passado dentro da sessão, mas o typescript apontará um erro de tipagem não segura. Para corrigir será necessário declarar uma nova interface para o user object da sessão no módulo <code v-pre>next-auth</code>:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-javascript"><code v-pre class="language-javascript">declare module &quot;next-auth&quot; {
  interface Session extends DefaultSession {
    user: {
      newParam: string; // novo parâmetro (session.user.id)
    } &amp; DefaultSession[&quot;user&quot;];
  }

  // ...novas propriedades
  interface User {
    newParam: string; // novo parâmetro
  }
}</code></pre>
</doc-codeblock></div>
<div class="flex mb-6">
    <div class="shrink-0 w-1 rounded-tl rounded-bl bg-yellow-500"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-yellow-500" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M22.48 15.59L14.01 1.45A2.968 2.968 0 0012.16.09c-.78-.19-1.58-.07-2.27.35-.41.25-.76.6-1.01 1.01v.01L.4 15.6c-.83 1.43-.33 3.27 1.1 4.1.45.26.95.4 1.48.4h16.95c.8-.01 1.55-.33 2.11-.9.56-.57.87-1.33.86-2.13a3.04 3.04 0 00-.42-1.48zm-1.87 2.21c-.19.19-.44.3-.69.3H2.99c-.17 0-.34-.05-.49-.13a.992.992 0 01-.37-1.35L10.6 2.48c.08-.14.2-.25.34-.33a.992.992 0 011.37.33l8.46 14.13c.09.15.13.32.13.49 0 .26-.1.51-.29.7z"></path>
                    <path d="M11.45 12.1c.55 0 1-.45 1-1v-4c0-.55-.45-1-1-1s-1 .45-1 1v4c0 .56.45 1 1 1zM11.46 14.1c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3 w-full">
            <h5>Somente atualizar a interface mais externa não atualiza as demais interfaces que a utilizam. No caso do exemplo acima, será necessário atualizar o <code v-pre>user</code> dentro de <code v-pre>Session</code> por conta da tipagem.</h5>
        </div>
    </div>
</div>
<doc-anchor-target id="signin-callback">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#signin-callback">#</doc-anchor-trigger>
        <span>SignIn Callback</span>
    </h3>
</doc-anchor-target>
<p>O <code v-pre>SignIn Callback</code> é chamado sempre que uma requisição de login é feita a um provedor do NextAuth.</p>
<p>Quando você utiliza o NextAuth.js com uma database, o objeto <code v-pre>User</code> será um objeto da database (id, name, isAuthorized, etc.) se o usuário já realizou login anteriormente, senão ele será um protótipo simples.
Por exemplo, quando o usuário realiza login pelo Google sem conexão com a database, o <code v-pre>session.user</code> possui os parâmetros <em>name</em>, <em>email</em> e <em>image</em>.</p>
<p>Já no caso do <code v-pre>Credentials Provider</code> o objeto <code v-pre>user</code> será a resposta do <code v-pre>authorize callback</code> e o objeto <code v-pre>profile</code> será a resposta do HTTP POST.</p>
<p>Você pode utilizar o <code v-pre>signIn() callback</code> para, por exemplo, verificar se um usuário tem permissão para fazer login e manejar redirecionamentos:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">src/app/api/auth/[...nextauth]/route.ts</div>
<pre class="language-javascript"><code v-pre class="language-javascript">// ...
callbacks: {
  async signIn({ user, account, profile, email, credentials }) {
    // você precisa fazer a lógica aqui ou pegar da db. Ex:
    if (email.endsWith(&quot;@struct.unb.br&quot;)) {
      return true
    }

    return &quot;/unauthorized&quot;
    // Ou pode retornar `false` para mostrar uma mensagem de erro padrão
    // return false
    }
  }
}
// ...</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="proteção-de-rotas">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#proteção-de-rotas">#</doc-anchor-trigger>
        <span>Proteção de Rotas</span>
    </h2>
</doc-anchor-target>
<p>O next oferece a possibilidade da criação de arquivos <code v-pre>layout.tsx</code> para configuração de páginas que estão dentro de determinadas rotas/pastas.</p>
<p>Além disso, também podemos criar grupos de rotas capazes de ocultar parte dos endereços de acesso para o usuário. Para isso, basta criarmos uma pasta de rota nomeada entre parênteses.
Por exemplo, podemos separar nossas rotas em dois tipos agrupando todas páginas que necessitam de autenticação em uma única rota <code v-pre>(auth)</code> e rotas públicas em <code v-pre>(public)</code>.</p>
<p>Utilizando esses dois recursos juntamente com o NextAuth, podemos criar rotas seguras que agrupam determinadas páginas protegidas por login. Para isso, podemos criar um arquivo <code v-pre>layout.tsx</code> como no exemplo abaixo:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">src/app/(user)/layout.tsx</div>
<pre class="language-javascript"><code v-pre class="language-javascript">import { getServerAuthSession } from &quot;~/server/auth&quot;;
import { permanentRedirect } from &quot;next/navigation&quot;;
import { AuthProvider } from &quot;~/components/authProvider&quot;;

export default async function AuthLayout({
  children,
}: {
  children: React.ReactNode,
}) {
  const session = await getServerAuthSession();

  if (session?.user) {
    //permanentRedirect não deixa retornar
    permanentRedirect(&quot;/login&quot;);
  }

  return (
    &lt;&gt;
      &lt;AuthProvider&gt;{children}&lt;/AuthProvider&gt;;
    &lt;/&gt;
  );
}</code></pre>
</doc-codeblock></div>
<p>Nesse exemplo, temos um grupo de rotas chamado <code v-pre>(user)</code> que agrupa todas páginas relacionadas ao perfil de um usuário qualquer. O componente <code v-pre>AuthProvider</code> engloba o <code v-pre>children</code> para que as páginas tenham acesso a sessão no <code v-pre>client-side</code>. Além disso, o layout pega o <code v-pre>session</code> no <code v-pre>server-side</code> e define que para acessar a rota, uma sessão precisa existir. Ou seja, o usuário deve estar estar logado senão ele é redirecionado para a página de login.</p>
<div class="flex mb-6">
    <div class="shrink-0 w-1 rounded-tl rounded-bl bg-blue-500 dark:bg-blue-400"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-blue-500 dark:text-blue-400" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M12 1C5.93 1 1 5.93 1 12s4.93 11 11 11 11-4.93 11-11S18.07 1 12 1zm0 20c-4.96 0-9-4.04-9-9s4.04-9 9-9 9 4.04 9 9-4.04 9-9 9z"></path>
                    <path d="M12 11c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1v-4c0-.55-.45-1-1-1zM12.01 7c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                    <path fill="none" d="M0 0h24v24H0z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3 w-full">
<p>Para não ter que usar a diretiva <code v-pre>&quot;use client&quot;</code> diretamente no arquivo <code v-pre>layout.tsx</code>, criamos um um componente <code v-pre>AuthProvider</code> para a utilização do <code v-pre>SessionProvider</code>.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">src/components/auth/authProvider.tsx</div>
<pre class="language-javascript"><code v-pre class="language-javascript">&quot;use client&quot;;
import { SessionProvider } from &quot;next-auth/react&quot;;
const AuthProvider = ({ children }: { children: React.ReactNode }) =&gt; {
  return &lt;SessionProvider&gt;{children}&lt;/SessionProvider&gt;;
};
export default AuthProvider;</code></pre>
</doc-codeblock></div>
        </div>
    </div>
</div>
<p>Dentro do grupo <code v-pre>(user)</code>, podemos ter uma página para o perfil do usuário <code v-pre>(user)/profile/page.tsx</code>.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">src/app/(user)/profile/page.tsx</div>
<pre class="language-javascript"><code v-pre class="language-javascript">import { getServerAuthSession } from &quot;~/server/auth&quot;;

export default async function ProfilePage() {
  const session = await getServerAuthSession();
  return (
    &lt;&gt;
      &lt;h1&gt;Página do Usuário&lt;/h1&gt;

      &lt;span&gt;Meu Nome: {session?.user.name}&lt;/span&gt;
      &lt;span&gt;Meu Email: {session?.user.email}&lt;/span&gt;
      &lt;span&gt;Minha Senha: LOL&lt;/span&gt;
    &lt;/&gt;
  );
}</code></pre>
</doc-codeblock></div>
<p>Também podemos criar uma nova rota para uma página de login <code v-pre>login/page.tsx</code>. Nessa página de login, de maneira análoga ao layout, direcionamos o usuário para seu perfil caso ele já esteja logado.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">src/app/login/page.tsx</div>
<pre class="language-javascript"><code v-pre class="language-javascript">import { permanentRedirect } from &quot;next/navigation&quot;;
import SessionControlButton from &quot;~/components/user/signIn&quot;;
import { getServerAuthSession } from &quot;~/server/auth&quot;;

export default async function LoginPage() {
  const session = await getServerAuthSession();

  if (session?.user) {
    permanentRedirect(`/profile/${session.user.email}`);
  }

  return (
    &lt;&gt;
      &lt;h1&gt;Página de Login Foda&lt;/h1&gt;
      &lt;SessionControlButton /&gt;
    &lt;/&gt;
  );
}</code></pre>
</doc-codeblock></div>

                                <div class="flex items-center mt-6 mb-6 clear-both">
                                    <span>
                                        <a href="../../../tags/">
                                            <svg class="inline-block -mb-px mr-1.5 text-blue-500 dark:text-blue-400" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" overflow="visible" fill="currentColor"><g><path d="M21.3 9.88l-8.59-8.59C12.52 1.11 12.27 1 12 1H2c-.55 0-1 .45-1 1v10c0 .27.11.52.29.71l8.59 8.58c.57.57 1.32.88 2.12.88s1.55-.31 2.12-.88l7.17-7.17a3.009 3.009 0 00.01-4.24zm-1.42 2.82l-7.17 7.17c-.39.39-1.02.39-1.42 0L3 11.59V3h8.59l8.29 8.29c.39.39.39 1.03 0 1.41z" /><path d="M7.01 6C6.45 6 6 6.45 6 7s.45 1 1 1 1-.45 1-1-.44-1-.99-1z" /></g></svg>
                                        </a>
                                        <span class="mr-2"><a href="../../../tags/nextauth/" class="no-link inline-flex align-middle items-center justify-center font-medium leading-none whitespace-nowrap text-blue-500 dark:text-blue-400 border border-blue-500 dark:border-blue-400 hover:bg-blue-100 dark:hover:bg-transparent dark:hover:border-blue-200 dark:hover:text-blue-200 transition-colors duration-200 ease-out h-6 px-2 text-xs rounded-md">
                                    <span>nextauth</span>
                                </a></span>
                                        <span class="mr-2"><a href="../../../tags/instala%C3%A7%C3%A3o/" class="no-link inline-flex align-middle items-center justify-center font-medium leading-none whitespace-nowrap text-blue-500 dark:text-blue-400 border border-blue-500 dark:border-blue-400 hover:bg-blue-100 dark:hover:bg-transparent dark:hover:border-blue-200 dark:hover:text-blue-200 transition-colors duration-200 ease-out h-6 px-2 text-xs rounded-md">
                                    <span>instalação</span>
                                </a></span>
                                        <span class="mr-2"><a href="../../../tags/next.js/" class="no-link inline-flex align-middle items-center justify-center font-medium leading-none whitespace-nowrap text-blue-500 dark:text-blue-400 border border-blue-500 dark:border-blue-400 hover:bg-blue-100 dark:hover:bg-transparent dark:hover:border-blue-200 dark:hover:text-blue-200 transition-colors duration-200 ease-out h-6 px-2 text-xs rounded-md">
                                    <span>next.js</span>
                                </a></span>
                                        <span class="mr-2"><a href="../../../tags/autentica%C3%A7%C3%A3o/" class="no-link inline-flex align-middle items-center justify-center font-medium leading-none whitespace-nowrap text-blue-500 dark:text-blue-400 border border-blue-500 dark:border-blue-400 hover:bg-blue-100 dark:hover:bg-transparent dark:hover:border-blue-200 dark:hover:text-blue-200 transition-colors duration-200 ease-out h-6 px-2 text-xs rounded-md">
                                    <span>autenticação</span>
                                </a></span>
                                        <span class="mr-2"><a href="../../../tags/usu%C3%A1rio/" class="no-link inline-flex align-middle items-center justify-center font-medium leading-none whitespace-nowrap text-blue-500 dark:text-blue-400 border border-blue-500 dark:border-blue-400 hover:bg-blue-100 dark:hover:bg-transparent dark:hover:border-blue-200 dark:hover:text-blue-200 transition-colors duration-200 ease-out h-6 px-2 text-xs rounded-md">
                                    <span>usuário</span>
                                </a></span>
                                    </span>
                                </div>
                
                                <!-- Required only on API pages -->
                                <doc-toolbar-member-filter-no-results></doc-toolbar-member-filter-no-results>
                            </div>
                            <footer class="clear-both">
                                <div class="flex flex-wrap items-center justify-between mt-14">
                                    <a class="my-2.5 inline-flex items-center text-sm whitespace-nowrap text-blue-500 dark:text-blue-400 hover:text-blue-700 hover:underline" href="https://github.com/StructCE/DocStruct/blob/main/Execucao/next_auth/implementacao.md" target="_blank" rel="noopener">
                                        <svg class="mr-1.5" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M20 12c-.55 0-1 .45-1 1v7c0 .55-.45 1-1 1H4c-.55 0-1-.45-1-1V6c0-.55.45-1 1-1h7c.55 0 1-.45 1-1s-.45-1-1-1H4C2.35 3 1 4.35 1 6v14c0 1.65 1.35 3 3 3h14c1.65 0 3-1.35 3-3v-7c0-.55-.45-1-1-1z" /><path d="M22.21 1.79c-1.18-1.18-3.24-1.18-4.41 0l-9.5 9.5c-.13.13-.22.29-.26.46l-1 4c-.08.34.01.7.26.95.18.2.44.3.7.3.08 0 .16-.01.24-.03l4-1c.18-.04.34-.13.46-.26l9.5-9.5c1.22-1.22 1.22-3.2.01-4.42zm-1.42 3l-9.3 9.3-2.11.53.53-2.11 9.3-9.3c.42-.42 1.16-.42 1.59 0 .43.43.43 1.15-.01 1.58z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                                        <span>Altere essa página no GitHub.</span>
                                    </a>
                                </div>
                            
                                <nav class="flex mt-14">
                                    <div class="w-1/2">
                                        <a class="px-5 py-4 h-full flex items-center break-normal font-medium text-blue-500 dark:text-blue-400 border border-gray-300 hover:border-gray-400 dark:border-dark-650 dark:hover:border-dark-450 rounded-l-lg transition-colors duration-150 relative hover:z-5" href="../../../execucao/next_auth/explicacao/">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="mr-3" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M19 11H7.41l5.29-5.29a.996.996 0 10-1.41-1.41l-7 7a1 1 0 000 1.42l7 7a1.024 1.024 0 001.42-.01.996.996 0 000-1.41L7.41 13H19c.55 0 1-.45 1-1s-.45-1-1-1z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                                            <span>
                                                <span class="block text-xs font-normal text-gray-400 dark:text-dark-400">Anterior</span>
                                                <span class="block mt-1">O que é Next​Auth?</span>
                                            </span>
                                        </a>
                                    </div>
                            
                                    <div class="w-1/2">
                                        <a class="px-5 py-4 -mx-px h-full flex items-center justify-end break-normal font-medium text-blue-500 dark:text-blue-400 border border-gray-300 hover:border-gray-400 dark:border-dark-650 dark:hover:border-dark-450 rounded-r-lg transition-colors duration-150 relative hover:z-5" href="../../../execucao/prisma/explicacao/">
                                            <span>
                                                <span class="block text-xs font-normal text-right text-gray-400 dark:text-dark-400">Próximo</span>
                                                <span class="block mt-1">O que é Prisma?</span>
                                            </span>
                                            <svg xmlns="http://www.w3.org/2000/svg" class="ml-3" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M19.92 12.38a1 1 0 00-.22-1.09l-7-7a.996.996 0 10-1.41 1.41l5.3 5.3H5c-.55 0-1 .45-1 1s.45 1 1 1h11.59l-5.29 5.29a.996.996 0 000 1.41c.19.2.44.3.7.3s.51-.1.71-.29l7-7c.09-.09.16-.21.21-.33z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                                        </a>
                                    </div>
                                </nav>
                            </footer>
                        </main>
                
                        <div class="border-t dark:border-dark-650 pt-6 mb-8">
                            <footer class="flex flex-wrap items-center justify-between">
                                <div>
                                    <ul class="flex flex-wrap items-center text-sm">
                                    </ul>
                                </div>
                                <div class="docs-copyright py-2 text-gray-500 dark:text-dark-350 text-sm leading-relaxed"><p>© Copyright 2024. <a href="https://www.struct.unb.br/">StructCE</a> Todos os direitos reservados.</p></div>
                            </footer>
                        </div>
                    </div>
                
                    <!-- Rendered if sidebar right is enabled -->
                    <!-- Sidebar right skeleton-->
                    <div v-cloak class="fixed top-0 bottom-0 right-0 translate-x-full bg-white border-gray-200 lg:sticky lg:border-l lg:shrink-0 lg:pt-6 lg:transform-none sm:w-1/2 lg:w-64 lg:z-0 md:w-104 sidebar-right skeleton dark:bg-dark-850 dark:border-dark-650">
                        <div class="pl-5">
                            <div class="w-32 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
                            <div class="w-48 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
                            <div class="w-40 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
                        </div>
                    </div>
                
                    <!-- User should be able to hide sidebar right -->
                    <doc-sidebar-right v-cloak></doc-sidebar-right>
                </div>

            </div>
        </div>
    
        <doc-search-mobile></doc-search-mobile>
        <doc-back-to-top></doc-back-to-top>
    </div>


    <div id="docs-overlay-target"></div>

    <script data-cfasync="false">window.__DOCS__ = { "title": "Utilizando NextAuth em projetos", level: 3, icon: "file", hasPrism: true, hasMermaid: false, hasMath: false, tocDepth: 23 }</script>
</body>
</html>
